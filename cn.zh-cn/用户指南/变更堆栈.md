# 变更堆栈<a name="aos_01_5009"></a>

堆栈创建成功后（状态为正常），可以根据自身需求变更堆栈输入参数。

## 操作步骤<a name="section6998166135010"></a>

1.  登录AOS控制台。
2.  在左侧导航栏中，单击“我的堆栈”。
3.  在堆栈列表中，单击待变更堆栈的名称。
4.  在堆栈详情页面，单击“变更”。
5.  更改模板版本、输入参数，单击“下一步”。
6.  核对信息配置无误后，单击“变更”。

    在堆栈详情页面的“事件”页签，可查看变更堆栈的具体操作事件。

## 变更规则<a name="section7899153917103"></a>

1. 模板变更规则：
   1. 更换模板时，模板中仅允许下列元素的增加及删除：
      - AOS.Agent、AOS.AppComponent、AOS.AppComponent.Container、AOS.AppComponent.Process、AOS.AppGroup、AOS.Application.Stateful、 AOS.Application.Stateless、AOS.Job、AOS.Service、AOS.StatelessApplication、AOS.StatefulApplication
      - CCE.Addon.AutoScaler、CCE.ConfigMap、CCE.DaemonSet、CCE.Deployment、CCE.HelmRelease、CCE.Ingress、CCE.Job、CCE.NodePool、CCE.Secret、CCE.Service、CCE.StatefulSet、CCE.Storage.OBS、CCE.Storage.SFS
      - ECS.CloudServer
      - ServiceStage.Agent、ServiceStage.AppGroup、ServiceStage.ContainerComponent、ServiceStage.Job、ServiceStage.ProcessComponent、ServiceStage.Service、ServiceStage.SoftwareComponent、ServiceStage.StatefulApplication、ServiceStage.StatelessApplication
      - nodes.Agent、nodes.AppGroup、nodes.ContainerComponent、nodes.HelmApplication、nodes.Job、nodes.ProcessComponent、nodes.Service、nodes.SoftwareComponent、nodes.StatefulApplication、nodes.StatelessApplication
   2. 不允许修改模板中的policies部分；
   3. 不允许修改现有元素关联关系；
   4. 不允许单独删除现有元素的关联关系，如果删除关系需要将相关的元素一并删除；
   5. 不允许在新增元素与已有元素之间添加关系。
2. 参数变更规则：
   1. 下列元素不支持输入参数变更：
      - AOS.Job、AOS.Service
      - APM.AutoScaler
      - ServiceStage.Job、ServiceStage.Service
      - nodes.Agent、nodes.AutoScaler、nodes.DynamicNodePool、nodes.DynamicVolume、nodes.FlexVolume、nodes.Job、nodes.NodePool、nodes.Service、nodes.StatefulApplication
   1. 下列元素仅支持在1.7及以上版本集群中进行输入参数变更：
      - AOS.Agent、AOS.StatefulApplication
      - ServiceStage.Agent、ServiceStage.StatefulApplication

## 相关产品及文档<a name="section1270164781611"></a>

<a name="aos_01_0000_table1196182515236"></a>
<table><thead align="left"><tr id="aos_01_0000_row61991225132314"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="aos_01_0000_p72001525172310"><a name="aos_01_0000_p72001525172310"></a><a name="aos_01_0000_p72001525172310"></a>相关产品</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="aos_01_0000_p7201925132317"><a name="aos_01_0000_p7201925132317"></a><a name="aos_01_0000_p7201925132317"></a>相关文档</p>
</th>
</tr>
</thead>
<tbody><tr id="aos_01_0000_row152031825142310"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="aos_01_0000_p192041625182318"><a name="aos_01_0000_p192041625182318"></a><a name="aos_01_0000_p192041625182318"></a><a href="https://www.huaweicloud.com/product/aos.html?infodoc1.0" target="_blank" rel="noopener noreferrer">应用编排服务 AOS</a></p>
<p id="aos_01_0000_p0311145810410"><a name="aos_01_0000_p0311145810410"></a><a name="aos_01_0000_p0311145810410"></a><a href="https://www.huaweicloud.com/product/cce.html?infodoc1.0" target="_blank" rel="noopener noreferrer">云容器引擎 CCE</a></p>
<p id="aos_01_0000_p62061025142316"><a name="aos_01_0000_p62061025142316"></a><a name="aos_01_0000_p62061025142316"></a><a href="https://www.huaweicloud.com/product/ecs.html?infodoc1.0" target="_blank" rel="noopener noreferrer">弹性云服务器 ECS</a></p>
<p id="aos_01_0000_p56849617152"><a name="aos_01_0000_p56849617152"></a><a name="aos_01_0000_p56849617152"></a><a href="https://www.huaweicloud.com/product/vpc.html?infodoc1.0" target="_blank" rel="noopener noreferrer">虚拟私有云 VPC</a></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="aos_01_0000_p959019196593"><a name="aos_01_0000_p959019196593"></a><a name="aos_01_0000_p959019196593"></a><a href="https://support.huaweicloud.com/qs-aos/index.html?infodoc1.0" target="_blank" rel="noopener noreferrer">快速入门-通过公共模板创建资源堆栈</a></p>
<p id="aos_01_0000_p14446527862"><a name="aos_01_0000_p14446527862"></a><a name="aos_01_0000_p14446527862"></a><a href="https://support.huaweicloud.com/tr-aos/aos_01_4000.html?infodoc1.0" target="_blank" rel="noopener noreferrer">模板简介</a></p>
<p id="aos_01_0000_p15698421353"><a name="aos_01_0000_p15698421353"></a><a name="aos_01_0000_p15698421353"></a><a href="https://support.huaweicloud.com/usermanual-aos/aos_01_8011.html?infodoc1.0" target="_blank" rel="noopener noreferrer">堆栈管理</a></p>
<p id="aos_01_0000_p7211210322"><a name="aos_01_0000_p7211210322"></a><a name="aos_01_0000_p7211210322"></a><a href="https://support.huaweicloud.com/usermanual-aos/aos_01_5016.html?infodoc1.0" target="_blank" rel="noopener noreferrer">使用设计器</a></p>
<p id="aos_01_0000_p0481187193317"><a name="aos_01_0000_p0481187193317"></a><a name="aos_01_0000_p0481187193317"></a><a href="https://support.huaweicloud.com/usermanual-aos/aos_01_5018.html?infodoc1.0" target="_blank" rel="noopener noreferrer">使用生成器</a></p>
</td>
</tr>
</tbody>
</table>

